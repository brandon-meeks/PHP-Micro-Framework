{% extends 'layouts/base.html.twig' %}

{%  block content %}

    <h1>Users Signup</h1>

    {% if user.errors is not empty %}
        <p>Errors:</p>
        <ul>
        {% for error in user.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    {% endif %}

    <form action="?users/create" method="post" id="signup">
        <div>
            <label for="name">Name</label>
            <input type="text" id="name" name="name" value="{{ user.name }}" required>
        </div>
        <div>
            <label for="email">Email</label>
            <input type="email" id="email" name="email" value="{{ user.email }}" required>
        </div>
        <div>
            <label for="password">Password</label>
            <input type="password" id="password" name="password" required>
        </div>
        <div>
            <input type="submit" id="submit" value="Submit">
        </div>
    </form>

{% endblock %}

{% block script %}
    {#$.validator.addMethod('validPassword',#}
        {#function(value, element, param) {#}
            {#if (value != '') {#}
                {#if (value.match(/.*[a-z]+.*/i) == null) {#}
                    {#return false;#}
                {#}#}
                {#if (value.match(/.*\d+.*/) == null) {#}
                    {#return false;#}
                {#}#}
            {#}#}
        {#return true;#}
        {#}#}
    {#);#}

    {#$('#signup').validate({#}
        {#rules: {#}
            {#name: "required",#}
            {#email: {#}
                {#required: true,#}
                {#email: true#}
            {#},#}
            {#password: {#}
                {#required: true,#}
                {#min: 6,#}
                {#equalsto: "#passwordConfirmation"#}
            {#},#}
        {#},#}
        {#success: "valid"#}
    {#});#}
{% endblock %}